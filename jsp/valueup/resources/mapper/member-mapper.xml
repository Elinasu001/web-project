<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	
	<!-- 로그인 -->
	<select id="login" resultType="member" parameterType="member">
		SELECT
			  USER_NO userNo
			, USER_ID userId
			, USER_PWD userPwd
			, USER_NAME userName
			, EMAIL	
			, ENROLL_DATE enrollDate
			, MODIFY_DATE modifyDate
			, STATUS
		FROM
		      KH_MEMBER
		WHERE
		      USER_ID = #{userId}
		  AND
		      USER_PWD = #{userPwd}
		  AND
		      STATUS = 'Y'
	</select>
	
	<!-- 회원가입 -->
	<insert id="signUp">
		INSERT
		  INTO 
		       KH_MEMBER
		  	   (
		  	   USER_NO
		  	 , USER_ID
		  	 , USER_PWD
		  	 , USER_NAME
		  	 , EMAIL
		  	   )
	   VALUES
	   		  (
	          KH_UNO.NEXTVAL
	        , #{userId}
	        , #{userPwd}
	        , #{userName}
	        , #{email}
	          )
	</insert>
	
	<!-- 아이디 중복체크 -->
	<select id="checkId" resultType="String" parameterType="string">
		SELECT
		       DECODE
		       (
	 	       COUNT(*)
		     , 0
		     , 'NNNY'
		     , 1
		     , 'NNNN'
		       )
		 FROM
		       KH_MEMBER
		WHERE
		       USER_ID = #{id}
	</select>
	
	
</mapper>
